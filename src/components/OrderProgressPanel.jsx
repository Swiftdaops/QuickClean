"use client"; import React from 'react';
import { motion, AnimatePresence } from 'framer-motion';
import { FiCheckCircle, FiTruck, FiPackage, FiMapPin } from 'react-icons/fi'; const stepsDefault = [ { key: 'created', label: 'Order Placed', icon: FiCheckCircle, color: '#06b6d4' }, { key: 'processing', label: 'Processing', icon: FiPackage, color: '#f59e0b' }, { key: 'dispatched', label: 'Dispatched', icon: FiTruck, color: '#3b82f6' }, { key: 'nearby', label: 'Nearby', icon: FiMapPin, color: '#10b981' },
]; function Step({ step, activeIndex, index }) { const Icon = step.icon; const isActive = index === activeIndex; const isDone = index < activeIndex; return ( <div className="opp-step"> <div className="opp-step-icon-wrap"> <div className={`opp-step-icon ${isDone ? 'done' : isActive ? 'active' : ''}`} style={{ borderColor: step.color }}> <Icon /> </div> <div className="opp-step-line" /> </div> <div className="opp-step-body"> <div className="opp-step-label">{step.label}</div> <div className="opp-step-fill"> {/* water-like fill animated with framer-motion */} <motion.div className="opp-water" initial={{ height: index <= activeIndex ? '100%' : '0%' }} animate={{ height: index < activeIndex ? '100%' : index === activeIndex ? '55%' : '0%' }} transition={{ duration: 0.8, ease: [0.22, 1, 0.36, 1] }} style={{ background: `linear-gradient(180deg, ${step.color} 0%, ${step.color}88 100%)` }} /> </div> </div> </div> );
} export default function OrderProgressPanel({ open, onClose, steps = stepsDefault, activeIndex = 0 }) { // activeIndex can be controlled via props later; default 0 return ( <AnimatePresence> {open && ( <> <motion.aside className="order-panel" initial={{ x: '100%' }} animate={{ x: 0 }} exit={{ x: '100%' }} transition={{ type: 'spring', stiffness: 300, damping: 30 }} > <div className="order-panel-header"> <h3 className=" font-semibold">Order Progress</h3> <button aria-label="Close" className="" onClick={onClose}>Close</button> </div> <div className="order-panel-body"> {steps.map((s, i) => ( <Step key={s.key} step={s} index={i} activeIndex={activeIndex} /> ))} </div> </motion.aside> <motion.div className="order-panel-backdrop" initial={{ opacity: 0 }} animate={{ opacity: 0.4 }} exit={{ opacity: 0 }} onClick={onClose} /> </> )} </AnimatePresence> );
}
